<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi Rekam Medis</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
     <!-- Ikon Fontawesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="sidebars.css">
    <style>
        /* Custom style for error handling */
        .is-invalid {
            border-color: #dc3545;
        }
        .invalid-feedback {
            display: block;
        }

              /* Custom CSS for the sidebar */
              #sidebar-wrapper {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100vh;
            background-color: #28a745;
            color: white;
            transition: all 0.3s ease-in-out;
        }

        .profile-icon {
            text-align: center;
            padding: 10px;
            border-top: 1px solid #ccc;
        }

        .profile-icon img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }

        .sidebar-heading {
            text-align: center;
            font-size: 1.5rem;
            padding: 20px 0;
            background-color: #218838;
        }

        .list-group-item {
            background-color: #28a745;
            color: white;
            border: none;
            transition: all 0.3s ease-in-out;
        }

        .list-group-item:hover {
            background-color: #218838;
            transform: translateX(10px);
        }

        .list-group-item-action:active {
            background-color: #1e7e34;
            transform: scale(0.98);
        }

        /* Dropdown menu style */
        .collapse .list-group-item {
            background-color: #218838;
            padding-left: 40px;
        }

        /* Profile Icon styling */
        .profile-icon {
            border-top: 1px solid #218838;
        }

        /* Style for the toggle button */
        #menu-toggle {
            background-color: #218838;
            border: none;
        }

        #menu-toggle:hover {
            background-color: #1e7e34;
        }
    </style>
</head>
<body>

   <!-- Sidebar -->
   <div class="d-flex" id="wrapper">
    <div class="bg-dark border-right" id="sidebar-wrapper">
        <div class="sidebar-heading text-white">Sistem Informasi Puskesmas</div>
        <div class="list-group list-group-flush flex-grow-1">
            <a href="index.html" class="list-group-item list-group-item-action bg-dark text-white"><i class="fa-solid fa-house"></i>    Home</a>
            <a href="dashboard.html" class="list-group-item list-group-item-action bg-dark text-white"><i class="fa-solid fa-gauge"></i>     Dashboard</a>
            <a href="#masterSubmenu" class="list-group-item list-group-item-action bg-dark text-white dropdown-toggle" data-toggle="collapse"><i class="fa-solid fa-user"></i>     Master</a>
            <div class="collapse" id="masterSubmenu">
                <a href="master-pasien.html" class="list-group-item list-group-item-action bg-dark text-white pl-5">Data Pasien</a>
                <a href="master-dokter.html" class="list-group-item list-group-item-action bg-dark text-white pl-5">Data Dokter</a>
                <a href="master-obat.html" class="list-group-item list-group-item-action bg-dark text-white pl-5">Data Obat</a>
                <a href="master-poli.html" class="list-group-item list-group-item-action bg-dark text-white pl-5">Data Poliklinik</a>
            </div>
            <a href="rekamedis.html" class="list-group-item list-group-item-action bg-dark text-white"><i class="fa-solid fa-pump-medical"></i>     Rekam Medis</a>
            <a href="loket.html" class="list-group-item list-group-item-action bg-dark text-white"><i class="fa-solid fa-cash-register"></i>     Loket</a>
            <a href="#" class="list-group-item list-group-item-action bg-dark text-white"><i class="fa-solid fa-circle-exclamation"></i>     Laporan</a>
        </div>
        <!-- Profile Icon -->
        <div class="profile-icon">
            <img src="logopuskes.png" alt="Profile Picture">
        </div>
    </div>

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <button class="btn btn-primary" id="menu-toggle"><i class="fa-solid fa-bars"></i></button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="landing.html"><i class="fa-solid fa-sign-out-alt"></i> Logout</a>
                    </li>
                </ul>
            </div>
        </nav>


            <!-- Bagian Konten -->
            <div class="container-fluid mt-4">
                <h1>Rekam Medis</h1>
                
                <!-- Pencarian -->
                <input type="text" class="form-control mb-3" id="searchInput" placeholder="Cari Data...">
                
                <!-- Tabel Pasien -->
                <div class="table-responsive">
                    <table class="table table-bordered" id="patientsTable">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Tanggal Periksa</th>
                                <th>Nama Pasien</th>
                                <th>Keluhan</th>
                                <th>Nama Dokter</th>
                                <th>Diagnosa</th>
                                <th>Nama Obat</th>
                                <th>Ruang</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data contoh di sini -->
                            <tr>
                                <td>1</td>
                                <td>2022-03-03</td>
                                <td>Tono</td>
                                <td>Pusing</td>
                                <td>Dr. Alfa</td>
                                <td>demam</td>
                                <td>Paracetamol</td>
                                <td>cendrawasih</td>
                                <td>
                                    <button class="btn btn-warning btn-sm edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-danger btn-sm delete-btn"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>2022-03-03</td>
                                <td>Indah</td>
                                <td>Muntaber</td>
                                <td>Dr. Apryan</td>
                                <td>Diare</td>
                                <td>lodia</td>
                                <td>Nuri</td>
                                <td>
                                    <button class="btn btn-warning btn-sm edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-danger btn-sm delete-btn"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>2022-03-03</td>
                                <td>Moli</td>
                                <td>Sesak Napas</td>
                                <td>Dr. Wasella</td>
                                <td>Asma</td>
                                <td>Albuterol</td>
                                <td>Melati</td>
                                <td>
                                    <button class="btn btn-warning btn-sm edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-danger btn-sm delete-btn"><i class="fas fa-trash-alt"></i></button>
                                </td>
                            </tr>
                           
                            <!-- Baris lain di sini -->
                        </tbody>
                    </table>
                </div>
                <button class="btn btn-primary mt-3" data-toggle="modal" data-target="#tambahPasienModal">Tambah Rekam Medis</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="tambahPasienModal" tabindex="-1" role="dialog" aria-labelledby="tambahPasienModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tambahPasienModalLabel">Tambah Rekam</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Tutup">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="patientForm">
                        <div class="form-group">
                            <label for="noRekamMedis">No. Rekam Medis</label>
                            <input type="text" class="form-control" id="noRekamMedis" placeholder="Masukkan nomor rekam medis" required>
                        </div>
                        <div class="form-group">
                            <label for="namaPasien">Tanggal Periksa</label>
                            <input type="text" class="form-control" id="namaPasien" placeholder="Masukkan tanggal periksa" required>
                        </div>
                        <div class="form-group">
                            <label for="tglLahir">Nama Pasien</label>
                            <input type="text" class="form-control" id="tglLahir" placeholder="Masukkan nama pasien" required>
                        </div>
                        <div class="form-group">
                            <label for="alamat">Keluhan</label>
                            <input type="text" class="form-control" id="alamat" placeholder="Masukkan keluhan" required>
                        </div>
                        <div class="form-group">
                            <label for="noHp">Nama Dokter</label>
                            <input type="text" class="form-control" id="noHp" placeholder="Masukkan nama dokter" required>
                        </div>
                        <div class="form-group">
                            <label for="diagnosa">Diagnosa</label>
                            <input type="text" class="form-control" id="noHp" placeholder="Masukkan nomor Diagnosa" required>
                        </div>
                        <div class="form-group">
                            <label for="obat">Nama Obat</label>
                            <input type="text" class="form-control" id="noHp" placeholder="Masukkan nama obat" required>
                        </div>
                        <div class="form-group">
                            <label for="ruang">Ruang</label>
                            <input type="text" class="form-control" id="noHp" placeholder="Masukkan ruang" required>
                        </div>
                        <input type="hidden" id="editIndex">
                        <button type="submit" class="btn btn-primary">Simpan</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap dan JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="sidebars.js"></script>

    <script>
        $(document).ready(function() {
            // Tambah atau edit pasien
            $('#patientForm').submit(function(e) {
                e.preventDefault();
                
                // Hapus class 'is-invalid' dari semua input
                $('.form-control').removeClass('is-invalid');
                
                let isValid = true;
                
                // Validasi
                if ($('#noRekamMedis').val().trim() === '') {
                    $('#noRekamMedis').addClass('is-invalid');
                    isValid = false;
                }
                if ($('#namaPasien').val().trim() === '') {
                    $('#namaPasien').addClass('is-invalid');
                    isValid = false;
                }
                if ($('#tglLahir').val().trim() === '') {
                    $('#tglLahir').addClass('is-invalid');
                    isValid = false;
                }
                if ($('#alamat').val().trim() === '') {
                    $('#alamat').addClass('is-invalid');
                    isValid = false;
                }
                if ($('#noHp').val().trim() === '') {
                    $('#noHp').addClass('is-invalid');
                    isValid = false;
                }
                
                if (!isValid) return;

                let editIndex = $('#editIndex').val();
                let noRekamMedis = $('#noRekamMedis').val();
                let namaPasien = $('#namaPasien').val();
                let tglLahir = $('#tglLahir').val();
                let alamat = $('#alamat').val();
                let noHp = $('#noHp').val();

                if (editIndex !== "") {
                    // Edit pasien yang sudah ada
                    let row = $('#patientsTable tbody tr').eq(editIndex);
                    row.find('td').eq(1).text(noRekamMedis);
                    row.find('td').eq(2).text(namaPasien);
                    row.find('td').eq(3).text(tglLahir);
                    row.find('td').eq(4).text(alamat);
                    row.find('td').eq(5).text(noHp);
                } else {
                    // Tambah pasien baru
                    let newIndex = $('#patientsTable tbody tr').length + 1;
                    $('#patientsTable tbody').append(
                        `<tr>
                            <td>${newIndex}</td>
                            <td>${noRekamMedis}</td>
                            <td>${namaPasien}</td>
                            <td>${tglLahir}</td>
                            <td>${alamat}</td>
                            <td>${noHp}</td>
                            <td>
                                <button class="btn btn-warning btn-sm edit-btn">✎</button>
                                <button class="btn btn-danger btn-sm delete-btn">🗑</button>
                            </td>
                        </tr>`
                    );
                }

                // Reset form dan tutup modal
                $('#tambahPasienModal').modal('hide');
                $('#patientForm')[0].reset();
                $('#editIndex').val('');
            });

            // Edit pasien
            $('#patientsTable').on('click', '.edit-btn', function() {
                let row = $(this).closest('tr');
                let index = row.index();
                let noRekamMedis = row.find('td').eq(1).text();
                let namaPasien = row.find('td').eq(2).text();
                let tglLahir = row.find('td').eq(3).text();
                let alamat = row.find('td').eq(4).text();
                let noHp = row.find('td').eq(5).text();

                $('#editIndex').val(index);
                $('#noRekamMedis').val(noRekamMedis);
                $('#namaPasien').val(namaPasien);
                $('#tglLahir').val(tglLahir);
                $('#alamat').val(alamat);
                $('#noHp').val(noHp);

                $('#tambahPasienModal').modal('show');
            });

            // Hapus pasien
            $('#patientsTable').on('click', '.delete-btn', function() {
                if (confirm('Apakah Anda yakin ingin menghapus data pasien ini?')) {
                    $(this).closest('tr').remove();
                    updatePatientNumbers();
                }
            });

            // Perbarui nomor pasien
            function updatePatientNumbers() {
                $('#patientsTable tbody tr').each(function(index) {
                    $(this).find('td').eq(0).text(index + 1);
                });
            }

            // Pencarian pasien
            $('#searchInput').on('keyup', function() {
                let value = $(this).val().toLowerCase();
                $('#patientsTable tbody tr').filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
                });
            });
        });
    </script>

</body>
</html>
